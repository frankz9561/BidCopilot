# BidCopilot 标书生成工具｜最终产品设计方案（融合版）

> 目标：融合三种设计风格的优势（专业标书体系、可落地的提示词工程、桌面端交互与反馈设计），删繁就简，形成一份可执行的最终方案。

---

## 1. 产品定位与价值主张

- **产品名称**：BidCopilot（建议中文名：智标 Pro）
- **一句话定位**：面向中小企业的 AI 标书协作与生成平台（桌面端、本地优先）
- **核心价值**：
  - 将标书编写周期从 3–5 天缩短到 2–4 小时
  - 实现“证据可追溯、内容可审阅、版本可回放”
  - 沉淀企业知识资产，支持复用与合规控制

## 2. 目标用户与场景

### 2.1 角色画像
- **商务经理**：追求效率与格式规范，需要快速生成、模板复用
- **投标专员**：追求合规、风险可控，需要智能纠错、格式规范
- **技术负责人**：追求技术方案准确性，需要技术内容自动生成与校验
- **企业老板**：希望无专职团队也能完成投标，需要一站式解决方案

### 2.2 核心场景
1. **新建投标项目**：解析 RFP → 合规矩阵 → 分章节草拟
2. **章节补全与润色**：对特定章节进行生成与优化
3. **知识复用与检索**：从历史标书中找可复用段落
4. **合规/风险检查**：发现缺失项、超承诺或格式问题
5. **交付导出与版本管理**：形成可交付 Word/PDF

### 2.3 典型工作流
标书团队通常从 RFP/招标文件开始，导入与解析后形成"需求清单/合规矩阵"，再基于历史资料库进行检索与复用，生成初稿，最后经历多轮审阅（技术、商务、法务、领导），确保每个关键陈述都有证据来源、满足格式与评分点。

---

## 3. 产品原则（去杂取优）

**证据优先**  
所有关键事实、能力、案例必须有引用，缺证据必须标注“待确认”。

**分阶段可控**  
采用“解析 → 规划 → 检索 → 草拟 → 校验 → 定稿”的链式流程，避免一次性长生成。

**结构化输出契约**  
关键步骤输出 JSON 或可解析结构，便于 UI 渲染与审阅回放。

**角色化交互**  
撰写者、审阅者、技术专家、商务负责人各有不同输出重点。

---

## 4. 全流程体验与信息架构

### 4.1 关键流程（建议默认）
1. 导入 RFP / 历史资料
2. Python 后端解析 + 分块 + 索引
3. 生成合规矩阵与评分点列表
4. 生成检索 Query Pack（多路检索）
5. 证据选择与引用计划
6. 分章节草拟（强制引用）
7. 引用一致性与合规检查
8. 审阅与定稿 → 模板导出

### 4.2 功能模块拆解
- 招标文件解析与结构化抽取
- 合规矩阵 & 评分点管理
- 证据检索与引用管理
- 章节生成（公司简介/技术方案/实施计划/商务/售后）
- 内容润色与评分优化
- 合规与风险审查
- 模板管理与变量映射
- 版本对比与审阅协作
- 知识库管理（导入/标签/检索）

---

## 5. 桌面端 UI/UX（Electron + Vue3）

### 5.1 布局策略（三栏式）
- **左侧栏**：项目、模板、知识库、历史版本
- **中间栏**：AI 工作区（对话 + 生成）
- **右侧栏**：上下文与预览（PDF/Word、引用高亮）

### 5.2 系统状态反馈（关键体验）
- **启动阶段**：展示“Python 服务启动中”进度屏，避免白屏
- **生成阶段**：统一进度条 + ETA + 阶段说明
- **异常阶段**：提示进程崩溃原因 + 一键重启

### 5.3 可信度校验交互
生成内容显示引用来源（chunk_id + 文档页码），点击后右侧 PDF 自动跳转高亮。

### 5.4 模板变量映射器
- **上传 Word 模板** → 自动解析 Jinja2 标签（如 `{{project_name}}`）
- **变量配置**：用户为每个变量指定数据来源：
  - 手动输入
  - RAG 检索结果
  - 系统字段（项目名称、日期等）
  - 固定值
- **保存映射规则**：支持模板复用
- **预览填充效果**：支持批量测试

### 5.5 离线与资源受限模式
- **无网模式**：
  - 检测到无法连接 API 时，提示切换到本地模型（Ollama）
  - 或仅使用基于关键词的传统搜索
  - 界面显示"离线模式"标识
- **资源占用**：
  - 向量数据库写入时显示后台处理提示
  - CPU 占用高时，保持 UI 响应不卡顿
  - 提供"暂停后台任务"选项

---

## 6. 提示词体系（产品级可运营）

### 6.1 提示词四层架构
采用四层提示词结构，明确职责划分：

1. **全局系统约束（Global Guardrails）**
   - 安全、隐私、禁止编造、强制引用、输出格式契约
   - 所有任务共用，由模型适配层自动注入

2. **任务开发者指令（Task Instruction）**
   - 当前功能模块的目标、步骤、评分标准
   - 如"生成合规矩阵"、"撰写技术方案章节"

3. **业务上下文（Business Context）**
   - RFP 摘要、客户信息、项目背景、模板规范、公司能力摘要、写作风格指南

4. **检索证据包（Evidence Pack）**
   - 本地向量检索返回的 chunks（含 chunk_id、来源、时间、可信度标签、文本）

### 6.2 统一系统约束（Global Guardrails）
```
你是"企业标书生成助手"，目标是帮助用户在遵守合规与保密要求下，基于提供的证据与输入生成可审阅、可追溯的标书内容。

硬性规则：
1) 只能使用【证据包】与【用户输入/模板约束】中出现的信息进行事实性陈述；若证据不足，必须输出"待确认/待补充材料"，禁止编造。
2) 所有关键事实、数据、资质、案例、承诺必须给出引用：在句末使用 [@chunk_id]；没有引用的关键陈述视为缺陷。
3) 输出必须严格遵循【输出格式】要求（JSON 或指定结构），不得输出多余解释文本。
4) 语言：中文；风格：专业、清晰、可审阅；避免夸大与绝对化措辞（如"业内第一/保证100%"），除非证据明确支持。
5) 若发现输入自相矛盾或存在风险条款，必须在"risks"字段中指出。
```

### 6.3 核心 Prompt 模块（6个关键模板）

#### P-010：RFP → 合规矩阵
- **输入**：RFP 结构、评分规则
- **输出**：requirements[]（需求清单）、open_questions[]（需澄清问题）、risk_flags[]（风险条款）
- **用途**：将解析结果整理为可执行的响应需求清单

#### P-020：需求 → Query Pack
- **输入**：单条需求、行业术语表、公司分类体系
- **输出**：queries[]（检索查询）、must_have_evidence_types[]（必需证据类型）
- **用途**：为每个需求生成多种检索 query，用于向量检索

#### P-030：Top-K 证据 → 证据选择与陈述计划
- **输入**：章节目标、证据包（Top-K）
- **输出**：selected_evidence[]（选中证据）、gaps[]（缺口）、claim_plan[]（陈述计划）
- **用途**：挑选可用证据并规划引用，不是直接写正文

#### P-040：分节草拟（强制引用）
- **输入**：章节标题/要求、claim_plan、selected_evidence、模板约束、语气
- **输出**：draft_text（正文）、citations[]（引用清单）、assumptions[]（假设）、todo[]（待补项）
- **用途**：生成可直接粘贴的章节草稿，每段必须含引用

#### P-050：引用与承诺审查
- **输入**：草稿文本、使用的证据包
- **输出**：missing_citations[]（缺引用）、weak_support[]（弱引用）、overclaims[]（超承诺）、rewrite_suggestions[]（改写建议）
- **用途**：质量门禁，检查引用完整性与证据一致性

#### P-060：模板结构化与占位符生成
- **输入**：模板文本/大纲、占位符规则
- **输出**：template_structure（结构化模板）、placeholders[]（占位符清单）、validation_rules[]（校验规则）
- **用途**：将模板转为可参数化结构，便于自动填充

### 6.4 角色化输出样式
| 角色 | 输出重点 | 典型场景 |
|---|---|---|
| **撰写者** | 可直接粘贴的章节草稿 | 快速生成初稿 |
| **审阅者** | 风险/缺失/超承诺清单 | 质量检查 |
| **技术专家** | 技术准确性校验 + 建议 | 技术方案审核 |
| **PM/负责人** | 工作分解 + 依赖路径 | 项目管理视角 |
| **商务报价专家** | 报价策略 + 风险提示 | 商务部分策划 |
| **资质响应专家** | 资质响应说明 + 证明材料清单 | 资格审查准备 |

### 6.5 提示词使用最佳实践

#### 输入四件套（每次高价值输出应包含）
1. **任务目标**：写什么/输出什么
2. **约束条件**：字数、格式、语气、禁用词、模板结构
3. **证据边界**：证据包是否已提供、是否允许"合理推断"、如何处理缺证据
4. **验收标准**：必须引用、不得夸大、输出必须可解析、必须列出风险/疑问

#### 常见失败模式与对策
- **失败：生成内容缺引用或引用乱贴**
  - 对策：先做 claim_plan，再生成正文；正文生成时要求"每段至少一个引用"
- **失败：生成夸大承诺**
  - 对策：系统提示词中明确禁用绝对化措辞，审阅模板中专门输出 overclaims
- **失败：不同章节重复/矛盾**
  - 对策：引入"术语与承诺统一表"，生成时注入，审查时检查一致性

### 6.6 提示词版本化与注册表
- 每个模板给 `prompt_version` 字段，便于回归测试与线上问题定位
- 建议使用 YAML 格式的提示词注册表，Python 后端加载并用 Jinja2 渲染变量
- 支持 A/B 测试不同版本的提示词效果

---

## 7. 数据与引用机制（结构化设计）

**Evidence 结构**
- chunk_id / source_title / source_path / page / tags / confidence / text

**引用规则**
- 关键事实句末必须 `[ @chunk_id ]`
- 输出必须包含“引用映射表”

---

## 8. 质量与合规控制

### 8.1 自检清单（五维度检查）
- **完整性检查**：是否覆盖所有要求的要点、是否有未完成的占位符、章节结构是否完整
- **准确性检查**：技术参数是否准确、时间节点是否合理、数据是否有据可查
- **一致性检查**：与其他章节是否矛盾、术语使用是否统一、格式风格是否一致
- **合规性检查**：是否符合招标要求、是否存在负面偏离、承诺是否可兑现
- **表达质量**：语句是否通顺、是否有错别字、专业度是否足够

### 8.2 引用一致性审查
- **缺引用检测**：识别缺少引用的关键事实/数据/能力/案例/承诺
- **弱引用检测**：识别引用不充分/不匹配的情况
- **超承诺检测**：识别超出证据范围的夸大承诺
- **改写建议**：对问题句子提供可直接替换的改写建议

### 8.3 风险识别（五类风险）
| 风险类型 | 识别要点 | 输出格式 |
|---|---|---|
| **资格风险** | 可能不满足的资格条件 | 风险描述 + 风险等级 + 应对建议 |
| **技术风险** | 难以实现或成本过高的技术要求 | |
| **商务风险** | 不合理的付款条件、过长的质保期等 | |
| **时间风险** | 准备时间不足、交付工期过紧 | |
| **合规风险** | 可能存在的违规或限制性条款 | |

**风险等级定义**：
- 高：可能导致废标或重大损失
- 中：增加中标难度或执行成本
- 低：需要关注但影响可控

### 8.4 评分预估
根据评分标准对当前内容进行评分预估：
- 逐项对照评分项，识别当前内容可能的得分情况
- 输出优势项、劣势项、风险项
- 提供按优先级排序的提分建议

---

## 9. 设计系统与视觉风格

### 9.1 风格原则
- **专业**：符合 B 端生产力工具定位
- **冷静**：避免过于花哨的视觉干扰
- **护眼**：适合长时间阅读和编辑
- **深色模式**：支持深色模式，降低夜间使用疲劳

### 9.2 色彩体系
- **主色调**：专业蓝（#1890FF）或深灰蓝（#2C3E50）
- **辅助色**：成功绿、警告橙、错误红、信息蓝
- **背景色**：浅灰（#F5F5F5）或深色模式下的深灰（#1E1E1E）
- **文字色**：深灰（#333333）或浅色模式下的浅灰（#E5E5E5）

### 9.3 字体排版
- **字体**：系统默认字体栈（Windows: Microsoft YaHei / Segoe UI）
- **字号**：
  - 标题：18-24px
  - 正文：14-16px
  - 辅助文字：12-13px
- **行高**：1.6-1.8（正文），确保阅读舒适
- **阅读区域宽度**：最大 1200px，避免过宽导致阅读疲劳

### 9.4 组件建议
- **Vue3 UI 库**：优先 Element Plus / Naive UI（根据团队熟悉度定）
- **图标库**：Element Plus Icons / Iconify
- **代码高亮**：highlight.js（用于展示 JSON、代码片段）

### 9.5 交互反馈
- **加载状态**：骨架屏 + 进度指示器
- **成功反馈**：Toast 提示 + 图标动画
- **错误反馈**：明确的错误信息 + 操作建议
- **悬停效果**：适度的阴影和颜色变化

---

## 10. MVP 与路线图

### MVP（首版必须具备）
1. RFP 解析 + 合规矩阵
2. 证据检索 + 引用输出
3. 技术方案章节草拟
4. 引用与合规检查
5. Word 模板变量映射与导出

### 迭代方向
1. 多角色审阅协作
2. 评分点优化与自动提分建议
3. 版本对比与可追溯回放
4. 离线降级（本地模型/Ollama）

---

## 11. 交互话术设计

### 11.1 首次引导话术
```
欢迎使用 BidCopilot（智标 Pro）！我是您的标书智能助手 🎯

我可以帮您：
📋 解析招标文件，提取关键信息
✍️ 智能生成各章节内容
🔍 从知识库检索可复用内容
✨ 润色优化，提升专业度
✅ 合规检查，规避风险

请问您今天想要：
1. 📄 开始新的投标项目
2. 📝 继续编辑已有标书
3. 🗂️ 管理模板和知识库
```

### 11.2 任务确认话术
```
我理解您需要【{{task_summary}}】

在开始之前，请确认以下信息：
- 目标章节：{{target_section}}
- 参考模板：{{template_name}}
- 特殊要求：{{special_requirements}}

确认无误请回复"开始"，如需调整请告诉我。
```

### 11.3 生成过程话术
```
正在为您生成【{{section_name}}】...

📊 进度：{{progress}}%
⏱️ 预计剩余时间：{{estimated_time}}

💡 小提示：生成完成后，您可以：
- 点击"重新生成"获取不同版本
- 选中文字后点击"优化"进行润色
- 使用"追问"功能补充细节
```

### 11.4 结果反馈话术
```
✅ 【{{section_name}}】已生成完成！

📝 内容概要：{{content_summary}}
📊 质量评估：
- 完整度：{{completeness_score}}/100
- 专业度：{{professionalism_score}}/100
- 响应度：{{response_score}}/100

您可以：
👍 满意 - 保存到标书
🔄 重新生成 - 获取新版本
✏️ 手动编辑 - 在编辑器中修改
💬 追问优化 - 告诉我改进方向
```

### 11.5 异常处理话术
- **信息不足**：列出缺少的信息，提供"使用默认"或"跳过"选项
- **检测到风险**：描述风险，提供"忽略并继续"、"自动修复"、"手动处理"选项
- **生成失败**：说明错误原因，提供排查建议和重试选项

## 12. 行业模板与风格配置

### 12.1 行业模板配置
支持预设不同行业的模板配置：
- **IT/软件开发类**：技术方案、项目管理、售后服务
- **工程建设类**：企业资质、技术方案、施工组织、安全文明
- **咨询服务类**：公司介绍、服务方案、团队配置、案例展示

### 12.2 写作风格配置
- **正式严谨**：适用于政府采购、大型央企项目
- **专业务实**：适用于企业招标、技术项目
- **创新展示**：适用于创意类、设计类项目

## 13. 非功能性需求

- **本地优先**：支持离线与隐私保护，数据不离开本地
- **稳定性**：Python 进程异常可恢复，提供一键重启机制
- **可维护性**：Prompt 版本化与注册表，支持 A/B 测试
- **性能**：大文档解析与检索可分段处理，避免 UI 卡顿
- **可扩展性**：模块化设计，便于添加新功能模块
- **安全性**：敏感数据加密存储，支持数据脱敏

---

## 12. 结论（最终设计方向）

最终方案以“可审阅、可追溯、可复用”为核心，结合：
- Claude 方案的**标书专业体系与角色化输出**
- OpenAI 方案的**证据链 + 结构化流程**
- Gemini 方案的**桌面端 UX 与系统反馈机制**

形成一个**产品化、可工程落地、可运营扩展**的标书生成平台。

